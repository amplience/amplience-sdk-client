var amp=amp||{};!function(){function a(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")}function b(a,b){for(var c=a.split("&"),d=[],e=0;e<c.length;e++){var f=c[e].split("="),g={};b?b(f,g):g[f[0]]=f[1],d.push(g)}return d}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}amp.di={},amp.stats={};var d=d||{};d.stringify=d.stringify||function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,e,f=[],g=a&&a.constructor==Array;for(c in a)a.hasOwnProperty(c)&&(e=a[c],b=typeof e,"string"==b?e='"'+e+'"':"object"==b&&null!==e&&(e=d.stringify(e)),f.push((g?"":'"'+c+'":')+String(e)));return(g?"[":"{")+String(f)+(g?"]":"}")},d.parse=d.parse||function(a){if("string"!=typeof a||!a)return null;var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g,f=/^\s+|\s+$/g;return b.test(a.replace(f,"").replace(c,"@").replace(d,"]").replace(e,""))?new Function("return "+a)():void 0},function(){var a,b,c,d;!function(){var e={},f={};a=function(a,b,c){e[a]={deps:b,callback:c}},d=c=b=function(a){function c(b){if("."!==b.charAt(0))return b;for(var c=b.split("/"),d=a.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d._eak_seen=e,f[a])return f[a];if(f[a]={},!e[a])throw new Error("Could not find module "+a);for(var g,h=e[a],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)k.push("exports"===i[l]?g={}:b(c(i[l])));var n=j.apply(this,k);return f[a]=g||n}}(),a("promise/all",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0===--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),a("promise/asap",["exports"],function(a){"use strict";function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new i(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){j.setTimeout(e,1)}}function e(){for(var a=0;a<k.length;a++){var b=k[a],c=b[0],d=b[1];c(d)}k=[]}function f(a,b){var c=k.push([a,b]);1===c&&g()}var g,h="undefined"!=typeof window?window:{},i=h.MutationObserver||h.WebKitMutationObserver,j="undefined"!=typeof global?global:void 0===this?window:this,k=[];g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():i?c():d(),a.asap=f}),a("promise/config",["exports"],function(a){"use strict";function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),a("promise/polyfill",["./promise","./utils","exports"],function(a,b,c){"use strict";function d(){var a;a="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),f(b)}();b||(a.Promise=e)}var e=a.Promise,f=b.isFunction;c.polyfill=d}),a("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){if(!v(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof i))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],j(a,this)}function j(a,b){function c(a){o(b,a)}function d(a){q(b,a)}try{a(c,d)}catch(e){d(e)}}function k(a,b,c,d){var e,f,g,h,i=v(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;n(b,e)||(i&&g?o(b,e):h?q(b,f):a===D?o(b,e):a===E&&q(b,e))}function l(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+D]=c,e[f+E]=d}function m(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],k(b,c,d,f);a._subscribers=null}function n(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(u(b)&&(d=b.then,v(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?o(a,d):p(a,d)))},function(b){return c?!0:(c=!0,void q(a,b))}),!0}catch(e){return c?!0:(q(a,e),!0)}return!1}function o(a,b){a===b?p(a,b):n(a,b)||p(a,b)}function p(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(r,a))}function q(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(s,a))}function r(a){m(a,a._state=D)}function s(a){m(a,a._state=E)}var t=a.config,u=(a.configure,b.objectOrFunction),v=b.isFunction,w=(b.now,c.all),x=d.race,y=e.resolve,z=f.reject,A=g.asap;t.async=A;var B=void 0,C=0,D=1,E=2;i.prototype={constructor:i,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;t.async(function(){k(c._state,d,e[c._state-1],c._detail)})}else l(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}},i.all=w,i.race=x,i.resolve=y,i.reject=z,h.Promise=i}),a("promise/race",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),a("promise/reject",["exports"],function(a){"use strict";function b(a){var b=this;return new b(function(b,c){c(a)})}a.reject=b}),a("promise/resolve",["exports"],function(a){"use strict";function b(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=this;return new b(function(b){b(a)})}a.resolve=b}),a("promise/utils",["exports"],function(a){"use strict";function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),b("promise/polyfill").polyfill()}(),amp.conf={cache_window:216e5,default_size:190,client_id:null,di_basepath:"http://i1.adis.ws/",content_basepath:"http://c1.adis.ws/",err_img:null},function(){amp.init=function(a){for(var b in a)amp.conf.hasOwnProperty(b)&&(amp.conf[b]=a[b])}}();var e=amp.indexOf=function(a,b){"use strict";if(null==a)throw new TypeError;var c=Object(a),d=c.length>>>0;if(0===d)return-1;var e=0;if(arguments.length>1&&(e=Number(arguments[2]),e!=e?e=0:0!=e&&1/0!=e&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=d)return-1;for(var f=e>=0?e:Math.max(d-Math.abs(e),0);d>f;f++)if(f in c&&c[f]===b)return f;return-1},f=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}();!function(){function b(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&++b;return b}amp.getAssetURL=function(a){return amp.conf.di_basepath+a.type+"/"+amp.conf.client_id+"/"+a.name};var d=function(a){var b=[];if(a.items||a.set&&a.set.items)for(var c=a.items||a.set.items,e=0;e<c.length;e++){var f=c[e];"video"==f.type?b.push({name:f.name,type:"v"}):(f.items||f.set&&f.set.items)&&(b=b.concat(d(f)))}return b},f=function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!1,g=0;g<b.length;g++){var h=b[g];if(h.name===e.name&&h.type===e.type){f=!0;break}}f||c.push(e)}return c},g=function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(-1!=e(c,d))continue;a[d]=b[d]}return a},h=function(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=a[b],d=0;d<c.media.length;d++)c.media[d].htmlCodec=amp.videoToFormat(c.media[d]);return a},i=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];d.media=amp.sortVideoSource(d.media,b)}return a},j=function(a,b){for(var c in a){if(a.hasOwnProperty(c))var d=a[c],e=function(a,b){if(a.items||a.set&&a.set.items)for(var c=a.items||a.set.items,d=0;d<c.length;d++){var f=c[d];"video"==f.type&&f.name==b.name?f=g(f,b,["url"]):(f.items||f.set&&f.set.items)&&(f=e(f,b))}return a};b=e(b,d)}return b},k=function(a,b){for(var c in a){if(a.hasOwnProperty(c))var d=a[c],e=function(a,b){if(a.items||a.set&&a.set.items)for(var c=a.items||a.set.items,d=0;d<c.length;d++){var f=c[d];"video"==f.type?c.splice(d,1):(f.items||f.set&&f.set.items)&&(f=e(f,b))}return a};b=e(b,d)}return b};amp.get=function(a,e,g,l){var m=0,n=!0,o={},p={},r=0,s=function(b){return function(c,e){var g=d(e),n=f(g,a),p=function(){m++,o[c]=e,o[c].url=b,o[c].name=o[c].name?o[c].name:c,m==r&&u()};n.length?amp.get(n,function(a){a=h(a),l&&(a=i(a,l)),e=j(a,e),p()},function(a){e=k(a,e),p()}):(e.media&&(e=h({d:e}).d,l&&(e=i({d:e},l).d)),p())}},t=function(a){return function(b,c){m++,p[b]=c,p[b].url=a,n=!0,m==r&&u()}},u=function(){b(o)>0&&e&&e(o),b(p)>0&&g&&g(p)},v=function(a){return a&&a.type&&a.name?!0:!1};if(c(a)){r=a.length;for(var w=0;r>w;w++)if(v(a[w])){var x=amp.getAssetURL(a[w]);q(x+".js",a[w].name,s(x),t(x),a.transform)}}else{if(r=1,!v(a))return;var x=amp.getAssetURL(a);q(amp.getAssetURL(a)+".js",a.name,s(x),t(x),a.transform)}};var l=function(){var a=new Date;return a-=a%amp.conf.cache_window},m=function(a){var b=o[a];b&&b.dispose(),delete n[a],delete p[a],delete o[a]},n=[],o=[],p=[];amp.jsonCache={},amp.jsonReturn=function(a,b){if(n[a]){clearTimeout(p[a]);for(var c=0;c<n[a].length;c++){var d=n[a][c];"error"==b.status?d.fail&&d.fail(a,b):(amp.jsonCache[a]=b,d.win&&d.win(a,b))}m(a)}},amp.get.createScript=function(a,b){var c=document.createElement("script");return c.src=a,c.onerror=b,c.dispose=function(){document.body.removeChild(c)},document.body.appendChild(c),c},amp.clearJsonCache=function(){amp.jsonCache={}};var q=amp.jsonp=function(b,c,d,e,f){if(f?f+="&":f="",amp.jsonCache[c])return void d(c,amp.jsonCache[c]);if(n[c])return void n[c].push({win:d,fail:e});n[c]=[{win:d,fail:e}],p[c]=setTimeout(function(){amp.jsonReturn(c,{status:"error",code:404,message:"Not Found",name:c})},1e4);var g=b+"?"+f+a({deep:!0,timestamp:l(),arg:"'"+c+"'",func:"amp.jsonReturn"}),h=amp.get.createScript(g,function(){amp.jsonReturn(c,{status:"error",code:404,message:"Not Found",name:c})});o[c]=h}}(),function(){var a=10;amp.content=function(a,d,f){c(a)||(a=[a]),e(a,function(a,c){a.length>0&&d(b(a)),c.length>0&&f(c)})};var b=function(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].result.payload,e=0;e<d.length;e++){var f=d[e];f.name=f.key.split("/"),f.name=f.name[f.name.length-1],b.push(f)}return b},d=function(a){return amp.conf.content_basepath+"p/"+amp.conf.client_id+"/["+f(a)+"].js"},e=function(b,c){for(var e=[],f=[],g=Math.ceil(b.length/a),h=function(a,b){e.push({name:a,result:b}),j()},i=function(a,b){f.push({name:a,result:b}),j()},j=function(){e.length+f.length===g&&c&&c(e,f)},k=0;g>k;k++){var l=b.slice(k*a,k*a+a);amp.jsonp(d(b),l.join(","),h,i)}},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push('"/c//'+a[c]+'"');return b.join(",")}}(),function(){amp.genHTML=function(a,b,e,f){if(a){var g={},h=function(a){var c=d(a,e,f);g[a.name]=c,b&&b.appendChild&&b.appendChild(c)};if(c(a))for(var i=0;i<a.length;i++)h(a[i]);else{if("object"!=typeof a)return;h(a)}return g}};var a=function(a){if(!a||!a.src&&!a.url)return!1;for(var b=a.isImage?a.url:a.src,c=amp.di.get(b),d=0;d<c.length;d++){var e=c[d];if(e.width&&"undefined"!=e.width||e.height&&"undefined"!=e.height)return!0}return!1};amp.videoToFormat=function(a){if(a){var b=a.format,c="",d="";switch(b&&b.toLowerCase()){case"flash video":b="flv";break;case"mpeg4":b="mp4"}switch(a["video.codec"]&&a["video.codec"].toLowerCase()){case"h264":break;case"theora":c="theora";break;case"vp8":c="vp8"}switch(a["audio.codec"]&&a["audio.codec"].toLowerCase()){case"aac":"mp4"==b&&(d="mp4a.40.2");break;case"vorbis":d="vorbis"}var e=b?"video/"+b:e;return""!=c&&(e+='; codecs="',e+=c,""!=d&&(e+=", "+d),e+='"'),e}},amp.genVideoHTML=function(b,c){b.src||(b.src=b.url);var d=document.createElement("div");d.setAttribute("id",b.name);var e=document.createElement("video");a(b)?e.setAttribute("poster",b.src):e.setAttribute("poster",amp.di.width(b.src,amp.conf.default_size));try{e.setAttribute("preload","auto")}catch(f){}e.setAttribute("controls","");var g,h=b.media;if(g=c?amp.sortVideoSource(h,c):h)for(var i=0;i<g.length;i++){var h=g[i],j=document.createElement("source");j.setAttribute("src",h.src),j.setAttribute("data-res",h.profileLabel),j.setAttribute("data-bitrate",h.bitrate),j.setAttribute("type",amp.videoToFormat(h)),e.appendChild(j)}return d.appendChild(e),d},amp.sortVideoSource=function(a,b){if(c(b)){if(b.length>0){for(var d=a.length,f=[],g=0;g<b.length;g++)for(var h=0;d>h;h++)(b[g]==a[h].profile||b[g]==a[h].profileLabel)&&f.push(a[h]);for(var h=0;d>h;h++)-1==e(b,a[h].profile)&&-1==e(b,a[h].profileLabel)&&f.push(a[h]);return f}}else if(!isNaN(b))return a.sort(function(a,c){var d=Math.abs(b-parseInt(a.bitrate)),e=Math.abs(b-parseInt(c.bitrate));return d-e});return a};var b=function(a){var b=a.split("/"),c=b[b.length-1];return c.split("?")[0]},d=function(c,e,g){var h;if(c.isImage||"img"==c.type){var h=document.createElement("img"),i=c.isImage?c.url:c.src;a(c)||(i=i+"?"+f(c)),e?h.setAttribute("data-amp-src",i):h.setAttribute("src",i),h.setAttribute("class","amp-main-img"),c.name?h.setAttribute("id",c.name):h.setAttribute("id",b(i))}else if("video"==c.type||c.media)h=amp.genVideoHTML(c,g);else if(c.items||c.set.items){var j=c.items||c.set.items,h=document.createElement("ul");h.setAttribute("id",c.name);for(var k=0;k<j.length;k++){var l=document.createElement("li");h.appendChild(l);var m=j[k];m.url=c.url,l.appendChild(d(m,e))}}return h},f=function(a){return a.width>a.height?"w="+amp.conf.default_size:"h="+amp.conf.default_size}}(),function(){var d=[{shortName:"cs",fullName:"grayscale",val:"gray"},{shortName:"dpi",fullName:"dpi",type:"number"},{shortName:"dpiFilter",fullName:"dpiFilter",type:"string"},{shortName:"resize",fullName:"resize",type:"boolean"},{shortName:"filter",fullName:"filter",type:"string"},{shortName:"upscale",fullName:"upscale",type:"boolean"},{shortName:"bg",fullName:"background",type:"string"},{shortName:"qlt",fullName:"quality",type:"number"},{shortName:"cm",fullName:"compositeMode",type:"string"},{shortName:"cs",fullName:"colourSpace",type:"string"},{shortName:"maxW",fullName:"maxWidth",type:"number"},{shortName:"maxH",fullName:"maxHeight",type:"number"},{shortName:"template",fullName:"template",type:"array"},{shortName:"w",fullName:"width",type:"number"},{shortName:"h",fullName:"height",type:"number"},{shortName:"fmt",fullName:"format",type:"string"},{shortName:"unsharp",fullName:"sharpen",type:"string"},{shortName:"crop",fullName:"crop",type:"string"},{shortName:"pcrop",fullName:"preCrop",type:"string"},{shortName:"img404",fullName:"missingImage",type:"string"},{shortName:"sm",fullName:"scaleMode",type:"string"},{shortName:"strip",fullName:"strip",type:"boolean"},{shortName:"orig",fullName:"original",type:"boolean"}],e=function(a,b,c){for(var e=0;e<a.length;e++){{"object"==typeof a[e]&&f(a[e])}for(var g in a[e])if(a[e].hasOwnProperty(g))for(var h=0;h<d.length;h++)d[h][b]==g&&(d[h].val&&(a[e][d[h][b]]=d[h].val),d[h][c]!=d[h][b]&&(a[e][d[h][c]]=a[e][g],delete a[e][g]))}return a},g=function(a){for(var b={},c=a.length;c--;){var d="object"==typeof a[c]&&f(a[c]);b[d]&&"template"!=d&&a.splice(c,1),b[d]=!0}return a},h=function(c,d,e){var h=c.split("?"),i=h[1]?b(h[1],function(a,b){a[1]?b[a[0]]=a[1]:b.template=a[0]}):[];if(!i)return!1;if(!d&&!e)return g(i);if(i=g(i),!d&&e){for(var j=[],k=0;k<i.length;k++)if(i[k][e]){if("template"!=e)return i[k][e];j.push(i[k][e])}return j.length>0?j:!1}i=g(i.concat(d));for(var l=[],k=0;k<i.length;k++){var m=f(i[k]);if("template"==m){var n=i[k][m];if("[object Array]"===Object.prototype.toString.call(n))for(var o=0;o<n.length;o++)l.push(n[o]);else l.push(n)}else l.push(a(i[k]))}return h[0]+"?"+l.join("&")},i=function(a,b,c,d){for(var e in a)if(a.hasOwnProperty(e))if(null!=a[e]&&"object"==typeof a[e]){if(("img"==a[e].type||"set"==a[e].type||"video"==a[e].type)&&c&&c.exclude){for(var f=!1,g=0;g<c.exclude.length;g++)a[e].name==c.exclude[g]&&(f=!0);if(f)continue}i(a[e],b,c,d)}else("src"==e&&("img"==a.type||"set"==a.type||"video"==a.type)||"url"==e&&a.isImage)&&(a[e]=h(a[e],b,d));return a};amp.di.get=function(a){return a?e(h(a),"shortName","fullName"):!1},amp.di.set=function(a,b,d,f){return b&&(b=c(b)?e(b,"fullName","shortName"):e([b],"fullName","shortName")),"string"!=typeof a?i(a,b,d,f):h(a,b,f)},function(){for(var a=0;a<d.length;a++)!function(a){amp.di[a.fullName]=function(b,c){if(b){var d="grayscale"!=a.fullName?a.shortName:null,e="undefined"!=typeof a.val?a.val:c;if("undefined"!=typeof e){var f={};return f[a.shortName]=e,amp.di.set(b,f,null,d)}var g=amp.di.set(b,null,null,d);switch(a.type){case"number":return Number(g);case"boolean":if("true"==g)return!0;if("false"==g)return!1;case"string":default:return g}}}}(d[a])}()}(),function(){var a=[];a.all=[],amp.stats.bind=function(d){if("function"==typeof d)return void a.all.push(d);if(c(d))for(var e=0;e<d.length;e++)amp.stats.bind(d[e]);else"object"==typeof d&&d.cb&&(d.type&&d.event?b(d.type+"."+d.event,d.cb):d.type?b(d.type,d.cb):d.event&&b(d.event,d.cb))};var b=function(b,c){a[b]?a[b].push(c):a[b]=[c]};amp.stats.event=function(b,c,d,e){var f=[];f=f.concat(a.all,a[c]?a[c]:[],a[d]?a[d]:[],a[c+"."+d]?a[c+"."+d]:[]);for(var g=0;g<f.length;g++)f[g](b,c,d,e)}}()}();